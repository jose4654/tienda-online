{% extends "base.html" %}

{% block titulo %}{{ producto.name }} - MiTienda{% endblock %}

{% block contenido %}
  <div class="container py-4">
    <div class="row">
      <div class="col-md-6">
        <img src="{{ producto.image_url|default:'https://via.placeholder.com/600x400?text=Sin+imagen' }}"
             alt="{{ producto.name }}" class="img-fluid rounded sombra-suave">
      </div>
      <div class="col-md-6">
        <h2>{{ producto.name }}</h2>
        <p class="text-muted">Categoría: {{ producto.category.name }}</p>
        <p>{{ producto.description|linebreaks }}</p>
        <h3 class="fw-bold">${{ producto.price }}</h3>
        <p>Stock disponible: {{ producto.stock }}</p>

        {% if producto.is_in_stock %}
          <form method="post" action="{% url 'tienda_app:agregar_al_carrito' producto.slug %}" class="mt-3">
            {% csrf_token %}
            <div class="input-group mb-3 w-50">
              <label class="input-group-text" for="cantidad">Cantidad</label>
              <input type="number" class="form-control" name="cantidad" id="cantidad" value="1" min="1" max="{{ producto.stock }}">
            </div>
            <button class="btn btn-primary btn-lg sombra-suave" type="submit">
              <i class="fas fa-shopping-cart"></i> Agregar al carrito
            </button>
          </form>
        {% else %}
          <div class="alert alert-warning mt-3">
            Este producto no se encuentra disponible por el momento.
          </div>
        {% endif %}

        <a href="{% url 'tienda_app:home' %}" class="btn btn-link mt-3">← Volver a la tienda</a>
      </div>
    </div>
  </div>
{% endblock %}

